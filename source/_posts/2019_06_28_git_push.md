---
title: git push
date: 2019-06-28 12:05:24
tags: git
---
**git push**: updates remote refs using local refs
```shell
git push  [--all | --mirror | --tags]
          [--prune]
          [<repository> [<refspec>...]]
```


## repository

`<repository>`指定远程仓库

缺省时， 参考顺序为
1. `branch.*.remote`，'*'指branch
2. `origin`


## refspec

`<refspec>`指定what destination ref to update with what source object。

缺省`<refspec>`并且没指定`--all`, `--mirror`, `--tags`时，参考顺序为
1. `remote.*.push`，'*'指remote仓库 
2. `push.default`
3. 当命令行或配置都没有的情况下，会发生the current branch is pushed to the corresponding upstream branch, but as a safety measure, the push is aborted if the upstream branch does not have the same name as the local one

格式为`[+]<src>:<dst>`

`<src>`一般是想要push的分支名，但可以是任何 "SHA-1 expression"。例如`master~4`,`HEAD`

`<dst>`指出远端的哪个ref需要被更新，必须是一个实际的ref

`:<dst>`也可缺省，缺省时参考顺序为
1. `remote.<repository>.push`
2. same ref as the `<src>`

如果`<dst>`不是以`refs/`开始，那么git会尝试去推测完整的ref,当给出的`<dst>`能唯一找到一个ref时，直接使用。如果不行，会根据`<src>`所在的`refs/`来推断。


## --prune

将所有已经不存在对应本地分支的远程分支移除。例如，一个远程分支名为`tmp`,如果本地不存在同名分支了，那么在运行这个命令后远程分支`tmp`会被移除。


## --all,--mirror,--tags

**--all**

将refs under `refs/heads/` （所有分支）push到远端

**--mirror**

将all refs under `refs/` (包括`refs/heads/`, `refs/remotes/`, `refs/tags/`……) 映射到远端

**--tags**

将all refs under `refs/tags` push 到远端
